--постановка задачи
--В БД имеется две таблицы (или одна), где хранятся периоды некоторых событий.

--Одни периоды непрерывно следуют друг задругом без пропуска дней. 
--В этих периодах меняются какие-то параметры системы, т.е. в каждый момент времени можно определить(прошлые, настоящие, прогнозируемые в будущем). 
--Назовем эти периоды штатными.

--Другие периоды показывают фактическое состояние системы, которые отлично от штатного. 
--Если фактичесоке совпадает со штатным, то такой период не фиксируется.
--Такие периоды приоритетны. Они могут продолжаться 1 день (дата начала совпадает с датой окончания), перекрывать полностью или частично штатные периоды.

--требуется соединить эти периоды в непрерывную последовательность.
--Приоритетные периоды перекрывают штатные. 
--ИСКЛЮЧЕНИЯ. В штатных периодах могут быть исключения, когда берется штатное состояние системы, не смотря на наличие "приоритетных" дней в этот период. 
